<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volt Audio - Text to Speech</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #cce7ff; color: #003366; margin: 0; padding: 0; }
        .container { max-width: 500px; margin: 50px auto; padding: 20px; background: #99c2ff; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 51, 102, 0.5); }
        h1 { color: #003366; }
        textarea { width: 100%; height: 100px; margin: 10px 0; padding: 10px; border: none; border-radius: 5px; font-size: 16px; }
        button { background: #003366; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin: 5px; transition: 0.3s; }
        button:hover { background: #002244; }
        .audio-controls { display: flex; justify-content: center; gap: 10px; margin-top: 15px; position: relative; }
        .dropdown { position: absolute; display: none; background: #003366; color: white; border-radius: 5px; top: 40px; padding: 5px 0; width: 120px; }
        .dropdown a { display: block; padding: 8px; text-decoration: none; color: white; font-size: 14px; }
        .dropdown a:hover { background: #002244; }
        select { padding: 5px; font-size: 14px; border-radius: 5px; }
        footer { margin-top: 20px; padding: 10px; font-size: 14px; background: #003366; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Volt Audio</h1>
        <p>Enter text and convert it to speech.</p>
        <textarea id="textInput" placeholder="Type your text here..."></textarea>
        <button id="convertBtn"><i class="fas fa-microphone"></i> Convert</button>
        <audio id="audioPlayer" controls></audio>
        <div class="audio-controls">
            <button id="playBtn"><i class="fas fa-play"></i></button>
            <button id="pauseBtn"><i class="fas fa-pause"></i></button>
            <button id="downloadBtn"><i class="fas fa-download"></i></button>
            <button id="shareBtn"><i class="fas fa-share"></i></button>
            <div class="dropdown" id="shareDropdown">
                <a href="#" id="shareWhatsApp"><i class="fab fa-whatsapp"></i> WhatsApp</a>
                <a href="#" id="shareTelegram"><i class="fab fa-telegram"></i> Telegram</a>
            </div>
            <select id="speedControl">
                <option value="0.5">0.5x</option>
                <option value="1" selected>1x</option>
                <option value="1.5">1.5x</option>
                <option value="2">2x</option>
            </select>
        </div>
        <p id="statusMessage"></p>
    </div>
    <footer>© Voltage Lord 2025. All rights reserved.</footer>
    <script>
        let audioBlob = null;

        document.getElementById("convertBtn").addEventListener("click", async () => {
            const text = document.getElementById("textInput").value.trim();
            const statusMessage = document.getElementById("statusMessage");
            const audioPlayer = document.getElementById("audioPlayer");
            if (!text) { statusMessage.textContent = "Please enter text!"; return; }
            statusMessage.textContent = "Generating audio...";
            try {
                const response = await fetch("https://voltagelord-volt-audio.hf.space/tts", {
                    method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ text })
                });
                if (!response.ok) throw new Error("Failed to generate audio.");
                audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);
                audioPlayer.src = audioUrl;
                statusMessage.textContent = "Audio generated successfully!";
            } catch (error) { statusMessage.textContent = "Error generating audio."; }
        });

        document.getElementById("playBtn").addEventListener("click", () => document.getElementById("audioPlayer").play());
        document.getElementById("pauseBtn").addEventListener("click", () => document.getElementById("audioPlayer").pause());

        document.getElementById("downloadBtn").addEventListener("click", () => {
            if (!audioBlob) { document.getElementById("statusMessage").textContent = "Generate audio first!"; return; }
            document.getElementById("statusMessage").textContent = "Downloading...";
            const filename = `volt-audio-${Math.random().toString(36).substring(7)}.mp3`;
            const a = document.createElement("a");
            a.href = URL.createObjectURL(audioBlob);
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            document.getElementById("statusMessage").textContent = "File downloaded successfully!";
        });

        document.getElementById("shareBtn").addEventListener("click", () => {
            const dropdown = document.getElementById("shareDropdown");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        });

        async function shareAudio(platform) {
            if (!audioBlob) { document.getElementById("statusMessage").textContent = "Generate audio first!"; return; }
            const file = new File([audioBlob], `volt-audio-${Math.random().toString(36).substring(7)}.mp3`, { type: "audio/mp3" });
            const text = "Made with Love❤\n < Voltage Lord";
            try {
                if (navigator.share) {
                    await navigator.share({ files: [file], text });
                } else {
                    alert("Sharing not supported on this browser.");
                }
            } catch (err) { console.error("Error sharing:", err); }
        }

        document.getElementById("shareWhatsApp").addEventListener("click", (e) => { e.preventDefault(); shareAudio("whatsapp"); });
        document.getElementById("shareTelegram").addEventListener("click", (e) => { e.preventDefault(); shareAudio("telegram"); });

        document.addEventListener("click", (e) => {
            if (!document.getElementById("shareBtn").contains(e.target) && !document.getElementById("shareDropdown").contains(e.target)) {
                document.getElementById("shareDropdown").style.display = "none";
            }
        });

        document.getElementById("speedControl").addEventListener("change", (e) => document.getElementById("audioPlayer").playbackRate = e.target.value);
    </script>
</body>
</html>
